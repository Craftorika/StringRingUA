StringArtGenerator.prototype.Clear=function(t){t.clearRect(0,0,this.width,this.height)},StringArtGenerator.prototype.GetLightness=function(t,i,e){return Math.floor(.2126*t+.7152*i+.0722*e)},StringArtGenerator.prototype.LimitPixel=function(t){return t<0?0:t>255?255:Math.round(t)},StringArtGenerator.prototype.DrawForm=function(){let t=this.formTypeBox.value;this.ctx.strokeStyle=BORDER_COLOR,this.ctx.beginPath(),t==CIRCLE_FORM&&this.ctx.arc(this.x0,this.y0,this.radius+PADDING/2,0,2*Math.PI),this.ctx.fillStyle=this.backgroundColorBox.value,this.ctx.fill()},StringArtGenerator.prototype.DrawGrayScale=function(){this.Clear(this.fakeCtx),this.fakeCtx.drawImage(this.image,this.imgX,this.imgY,this.imgWidth*this.imgScale,this.imgHeight*this.imgScale);let t=this.fakeCtx.getImageData(0,0,this.width*this.dpr,this.height*this.dpr),i=t.data,e=this.invertBox.checked;for(let t=0;t<i.length;t+=4){let r=this.GetLightness(i[t],i[t+1],i[t+2]);e&&(r=255-r),r=this.brightnessTable[r],r=this.contrastTable[r],i[t]=r,i[t+1]=r,i[t+2]=r}this.fakeCtx.putImageData(t,0,0),this.ctx.drawImage(this.fakeCanvas,0,0,this.width,this.height)},StringArtGenerator.prototype.DrawLoadedImage=function(){this.Clear(this.ctx),this.ctx.save(),this.DrawForm(),this.ctx.clip(),this.DrawGrayScale(),this.ctx.stroke(),this.ctx.restore()},StringArtGenerator.prototype.DrawNails=function(){this.DrawForm(),this.ctx.fillStyle=NAIL_COLOR;for(let t of this.nails)this.ctx.beginPath(),this.ctx.arc(t.x,t.y,NAIL_RADIUS,0,2*Math.PI),this.ctx.fill()},StringArtGenerator.prototype.DrawLine=function(t,i,e){this.ctx.lineWidth=1.3,this.ctx.strokeStyle=e,this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(i.x,i.y),this.ctx.stroke()};